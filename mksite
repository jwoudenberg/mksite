#!/usr/bin/env nix-shell
#!nix-shell -i python3 -p python3

import argparse
from pathlib import Path


def main():
    parser = argparse.ArgumentParser(description="create a static site")
    parser.add_argument(
        "paths",
        help="path to a file to include",
        metavar="PATH",
        action="append",
        nargs="+",
        type=Path,
    )
    parser.add_argument(
        "--filter",
        help="""a filter applied to files with extension IN.
CMD will be invoked for each file, with file contents passed to stdin.
Output is read from stdout and should have extension OUT.
Filters get applied to matching files in the order they are specified""",
        nargs=3,
        metavar=("IN", "OUT", "CMD"),
        action="append",
        default=[],
    )
    args = parser.parse_args()
    print(args)


main()
